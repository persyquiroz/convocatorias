import{a as _e,b as fe,c as Ee,d as Pe}from"./chunk-J76DOO53.js";import{m as we,n as P,o as Be,s as Oe,u as $e}from"./chunk-3Y5UR2OT.js";import{a as Fe,b as ke,c as ze}from"./chunk-GLL2MVIS.js";import{b as Ie,e as Te}from"./chunk-7MOKH42M.js";import{b as ge}from"./chunk-HSVYSG4W.js";import{c as Y}from"./chunk-HPPM4TCI.js";import"./chunk-EXZKZ57T.js";import{a as pe,d as me,e as de,f as ue,g as ve,h as Ce,i as he,j as xe,k as be,l as Se,m as De}from"./chunk-CE42HD4V.js";import{l as Me,m as ye}from"./chunk-XAXKPXDT.js";import{$ as ce,U as le,Y as se,a as Z,d as ee,e as te,g as ie,h as oe,i as ae,j as ne,k as re}from"./chunk-AV7I52OR.js";import"./chunk-IX6G3U3V.js";import"./chunk-VUPUYXOT.js";import{i as k,k as E,l as Q,m as W,n as X}from"./chunk-N5IUNS7W.js";import{Ea as b,Eb as g,Fa as S,I as B,Ib as M,Jb as y,Kc as U,Lb as p,Qb as j,Qc as q,Rb as I,Sc as K,Tb as D,Ub as T,Vb as o,Wb as i,Xb as C,Zb as F,cc as _,ec as m,hb as V,hc as R,ia as O,j as w,mb as r,oa as d,pc as a,qc as h,rc as f,sc as G,tc as A,ua as $,uc as L,vc as J,wc as u,xb as N,xc as x,yc as H}from"./chunk-DXY7ABYP.js";var z=Be("convocatorias"),Ve=P(z,t=>t.carreras),Ne=P(z,t=>t.convocatorias),je=P(z,t=>t.pagination);var Re=(()=>{class t{constructor(){}set(e,n){localStorage.setItem(e,JSON.stringify(n))}get(e){let n=localStorage.getItem(e);return n?JSON.parse(n):null}delete(e){localStorage.removeItem(e)}clearAll(){localStorage.clear()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ae=()=>[E,W,Q,se,Ce,Fe,ke],Le=()=>[E,be,k],Je=()=>[3,6,9,18,30,100,500,1e3,2e3];function He(t,l){t&1&&C(0,"mat-progress-bar",19)}function Ue(t,l){if(t&1&&(o(0,"mat-option",12),a(1),i()),t&2){let e=l.$implicit;p("value",e.id),r(),h(e.nombre)}}function qe(t,l){if(t&1&&(o(0,"mat-option",12),a(1),i()),t&2){let e=l.$implicit;p("value",e.id),r(),h(e.nombre)}}function Ke(t,l){if(t&1&&C(0,"img",32),t&2){let e=m().$implicit;p("src",e.entidad_logo_url,V)}}function Qe(t,l){t&1&&C(0,"img",33)}function We(t,l){if(t&1&&a(0),t&2){let e=m().$implicit;f(" (",e.entidad_siglas,") ")}}function Xe(t,l){if(t&1){let e=F();o(0,"div",20)(1,"div",21)(2,"mat-card",22)(3,"mat-card-content")(4,"div",23),g(5,Ke,1,1)(6,Qe,1,0),M(7,5,null,null,6),y(),o(9,"div",24)(10,"div",25),a(11),g(12,We,1,1),i(),o(13,"div",26),a(14),i()()(),o(15,"div",27)(16,"div")(17,"a",28),_("click",function(){let s=b(e).$implicit,c=m(2);return S(c.verMas(s))}),a(18),i()(),o(19,"div"),a(20),u(21,"date"),i(),o(22,"div"),a(23),u(24,"number"),i(),o(25,"div"),a(26),i(),o(27,"div",29),a(28),i(),o(29,"div",30)(30,"button",31),_("click",function(){let s=b(e).$implicit,c=m(2);return S(c.verDetalle(s.id))}),a(31,"Ver detalle"),i()()()()()()()}if(t&2){let e=l.$implicit;r(11),f("",e.entidad_nombre," "),r(),j(e.entidad_nombre!=e.entidad_siglas?12:-1),r(2),G("",e.carrera_nombre," - ",e.lugar_nombre,""),r(4),h(e.nro),r(2),f("Finaliza: ",H(21,9,e.fecha,"dd/MM/yyyy"),""),r(3),f("Sueldo: ",x(24,12,e.sueldo),""),r(3),f("Cargo: ",e.cargo,""),r(2),f("Grado: ",e.grado,"")}}function Ye(t,l){if(t&1&&(o(0,"div",8),D(1,Xe,32,14,"div",20,I),u(3,"async"),i()),t&2){let e=m();r(),T(x(3,0,e.convocatorias$))}}function Ze(t,l){t&1&&(o(0,"div",34),a(1,"Cargando datos..."),i())}function et(t,l){t&1&&(o(0,"span"),a(1,"Error al cargar :("),i())}function tt(t,l){if(t&1){let e=F();o(0,"div",38)(1,"mat-paginator",39),_("page",function(s){b(e);let c=m(2);return S(c.changePage(s))}),i()()}if(t&2){let e=l.ngIf;r(),R("pageIndex",e.current_page-1),p("length",e.total)("pageSize",e.page_size)("pageSizeOptions",J(4,Je))}}function it(t,l){if(t&1&&(o(0,"div",8)(1,"div",35)(2,"div",36),a(3),i()(),g(4,tt,2,5,"div",37),u(5,"async"),i()),t&2){let e=m();r(3),h(e.buscado_text()),r(),p("ngIf",x(5,2,e.pagination$))}}function ot(t,l){t&1&&(o(0,"div",40),a(1,"Cargando paginaci\xF3n..."),i())}function at(t,l){t&1&&(o(0,"span"),a(1,"Error al cargar :("),i())}var Jt=(()=>{class t{changeDetectionRef=d(U);store=d(we);carreras$=this.store.select(Ve);convocatorias$=this.store.select(Ne);pagination$=this.store.select(je);paging={search:"",page_size:9,last_page:1,current_page:1,ordering:"carrera__nombre,-sueldo,entidad__nombre"};cargado=!1;dialog=d(Te);sincronizando=!1;sueldos=[{id:"0-2000",nombre:"Hasta 2000"},{id:"2000-4000",nombre:"De 2000 a 4000"},{id:"4000-6000",nombre:"De 4000 a 6000"},{id:"6000-8000",nombre:"De 6000 a 8000"},{id:"8000-",nombre:"De 8000 a m\xE1s"}];formBuilder=d(ne);myform=this.formBuilder.group({entidad_id:["T",[]],carrera_id:["T",[]],sueldo_:[this.sueldos[3].id,[]],search:["",[]],current_page:[1,[]],page_size:[9,[]]});$subject=new w;buscado=N("");buscado_text=q(()=>this.buscado()?'Se ha buscado con "'+this.buscado()+'"':"");router=d(Y);key_local="filtro-convos";storageService=d(Re);constructor(){K(()=>{console.log("Cambi\xF3 el valor buscado: "+this.buscado())})}ngOnInit(){let e=this.storageService.get(this.key_local);e&&(this.myform.patchValue(e),this.paging.current_page=e.current_page,this.paging.page_size=e.page_size),this.store.dispatch(Oe()),this.listar(),this.$subject.pipe(B(500)).subscribe(n=>this.listarPor())}listar(){this.cargado=!1;let e=this.myform.value;if(delete this.paging.sueldo__gte,delete this.paging.sueldo__lte,e.sueldo_!="T"){let n=e.sueldo_.split("-");n[0]&&(this.paging.sueldo__gte=n[0]),n[1]&&(this.paging.sueldo__lte=n[1])}e.carrera_id!="T"?this.paging.carrera_id=e.carrera_id:delete this.paging.carrera_id,this.paging.search=e.search.trim(),this.paging.sueldo_=e.sueldo_,this.buscado.set(this.paging.search),this.storageService.set(this.key_local,this.paging),this.store.dispatch($e({paging:Object.assign({},this.paging)})),this.cargado=!0,this.changeDetectionRef.markForCheck()}changePage(e){console.log("e: ",e),this.paging.page_size!=e.pageSize?(this.paging.page_size=e.pageSize,this.paging.current_page=1):(this.paging.page_size=e.pageSize,this.paging.current_page=e.pageIndex+1),this.listar()}sincronizar(e,n){this.dialog.open(Ee,{width:"250px",data:{titulo:"Sincronizar",mensaje:"\xBFEst\xE1 seguro de sincronizar las convocatorias?"},enterAnimationDuration:e,exitAnimationDuration:n}).afterClosed().subscribe(c=>{c&&this.sincronConfirm()})}sincronConfirm(){}changeSelect(e){this.listarPor()}verMas(e){this.dialog.open(Pe,{width:"100vw",height:"100vh",panelClass:"fullscreen-dialog",hasBackdrop:!0,data:e}).afterClosed().subscribe(s=>{})}listarPor(){this.paging.current_page=1,this.listar()}listarTime(e){this.$subject.next("")}verDetalle(e){this.router.navigate(["/detalle/"+e])}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=$({type:t,selectors:[["app-convocatorias"]],standalone:!0,features:[A([{provide:xe,useClass:De}]),L],decls:49,vars:6,consts:[["style","position: fixed;","mode","indeterminate",4,"ngIf"],[1,"buscador"],[1,"container"],[1,"titulo"],[1,"pt-2"],["src","logo-buscador.png",1,"logo-buscador"],["id","titulo",1,"ms-1"],["autocomplete","off","spellcheck","true",2,"display","contents",3,"formGroup"],[1,"row"],[1,"col-12","col-sm-6","col-lg-3"],["appearance","outline",2,"width","97%"],["formControlName","carrera_id",3,"ngModelChange"],[1,"select-min",3,"value"],[1,"col-12","col-sm-6","col-lg-2"],["formControlName","sueldo_",3,"ngModelChange"],[1,"col-12","col-sm-12","col-lg-4"],["appearance","outline","floatLabel","always",2,"width","97%"],["matInput","","formControlName","search",3,"keyup"],[1,"container","pt-2","pb-2"],["mode","indeterminate",2,"position","fixed"],[1,"col-12","col-sm-6","col-lg-4","col-xl-4"],[1,"p-1"],["appearance","outlined"],[1,"d-flex"],[1,"ps-2","lh-15"],[1,"txt-13"],[1,"txt-12","color-gris"],[1,"pt-1","txt-13","lh-15"],[1,"an-link",3,"click"],[1,"txt-10"],[1,"mt-1"],["mat-stroked-button","","matTooltip","Ver detalle de la convocatoria",1,"btn-detalle",3,"click"],[1,"logo-entidad-2","logo-border",3,"src"],["src","logo-entidad.png",1,"logo-entidad-2","logo-border"],[1,"text-center"],[1,"col-12","col-sm-4"],[1,"txt-12"],["class","col-12 col-sm-8",4,"ngIf"],[1,"col-12","col-sm-8"],["showFirstLastButtons","","aria-label","Select page",1,"bg-transparent",3,"page","length","pageSize","pageIndex","pageSizeOptions"],[1,"txt-11"]],template:function(n,s){n&1&&(g(0,He,1,0,"mat-progress-bar",0),o(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),C(5,"img",5),i(),o(6,"div",6)(7,"b"),a(8,"Convocatorias"),i(),a(9," de trabajo"),i()(),o(10,"form",7)(11,"div",8)(12,"div",9)(13,"mat-form-field",10)(14,"mat-label"),a(15,"Profesi\xF3n / Carrera"),i(),o(16,"mat-select",11),_("ngModelChange",function(v){return s.changeSelect(v)}),o(17,"mat-option",12),a(18,"Todas"),i(),D(19,Ue,2,2,"mat-option",12,I),u(21,"async"),i()()(),o(22,"div",13)(23,"div")(24,"mat-form-field",10)(25,"mat-label"),a(26,"Sueldo"),i(),o(27,"mat-select",14),_("ngModelChange",function(v){return s.changeSelect(v)}),o(28,"mat-option",12),a(29,"Todos"),i(),D(30,qe,2,2,"mat-option",12,I),i()()()(),o(32,"div",15)(33,"div")(34,"mat-form-field",16)(35,"mat-label"),a(36,"Buscar por entidad o cargo"),i(),o(37,"input",17),_("keyup",function(v){return s.listarTime(v)}),i()()()()()()()(),o(38,"div",18),g(39,Ye,4,2)(40,Ze,2,0)(41,et,2,0),M(42,39,Ae,null,40,41),y(),g(44,it,6,4)(45,ot,2,0)(46,at,2,0),M(47,44,Le,null,45,46),y(),i()),n&2&&(p("ngIf",!s.cargado),r(10),p("formGroup",s.myform),r(7),p("value","T"),r(2),T(x(21,4,s.carreras$)),r(9),p("value","T"),r(2),T(s.sueldos))},dependencies:[E,Se,X,k,ye,Me,ce,ge,he,Ie,re,ie,Z,ee,te,oe,ae,de,me,pe,ve,ue,le,fe,_e,ze],styles:[".buscador[_ngcontent-%COMP%]{padding-top:8px;background-color:#eef6ff;border-bottom:2px solid #bcc9d8}.titulo[_ngcontent-%COMP%]{font-size:25px;line-height:55px;color:#005cbb;letter-spacing:0px;display:flex}.logo-buscador[_ngcontent-%COMP%]{width:40px}.lh-15[_ngcontent-%COMP%]{line-height:15px}.color-gris[_ngcontent-%COMP%]{color:#656565}.logo-border[_ngcontent-%COMP%]{border:1px solid #c4c6d0;padding:2px}.bg-transparent[_ngcontent-%COMP%]{background:transparent!important}.btn-detalle[_ngcontent-%COMP%]{width:100%;height:25px}"],changeDetection:0})}return t})();export{Jt as ConvocatoriasComponent};
